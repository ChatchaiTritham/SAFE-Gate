<mxfile host="app.diagrams.net" modified="2026-01-25T11:30:00.000Z" agent="Claude Code" version="22.1.16">
  <diagram name="SAFE-Gate Architecture" id="architecture">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="700" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="SAFE-Gate: Six-Gate Parallel Expert System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="300" y="10" width="800" height="30" as="geometry" />
        </mxCell>

        <!-- Stage Labels with Colors -->
        <mxCell id="stage1_label" value="STAGE 1: Parallel Gate Evaluation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#0066CC;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="50" width="240" height="25" as="geometry" />
        </mxCell>

        <mxCell id="stage2_label" value="STAGE 2: Conservative Merging" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#CC0000;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="550" y="50" width="280" height="25" as="geometry" />
        </mxCell>

        <mxCell id="stage3_label" value="STAGE 3: Output Generation" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#006600;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="950" y="50" width="280" height="25" as="geometry" />
        </mxCell>

        <!-- Legend Box (Top Left) -->
        <mxCell id="legend_header" value="LEGEND" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=1;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="90" width="130" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="Rule-based gate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontSize=9;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="120" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="Statistical gate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="147" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="Bayesian gate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=9;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="174" width="130" height="22" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="Completeness gate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="201" width="130" height="22" as="geometry" />
        </mxCell>

        <!-- Patient Input -->
        <mxCell id="input" value="Patient Clinical Data&lt;br&gt;(52 features)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="280" width="130" height="60" as="geometry" />
        </mxCell>

        <!-- Six Gates (Compact Vertical Layout) -->
        <mxCell id="g1" value="&lt;b&gt;G1: Critical Red Flags&lt;/b&gt;&lt;br&gt;âš ï¸ Rule-based&lt;br&gt;Emergency guidelines&lt;br&gt;Unstable vitals, neuro deficits" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#cc0000;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="90" width="150" height="65" as="geometry" />
        </mxCell>

        <mxCell id="g2" value="&lt;b&gt;G2: Cardiovascular Risk&lt;/b&gt;&lt;br&gt;â¤ï¸ Statistical&lt;br&gt;Risk factor scoring&lt;br&gt;Age, HTN, DM, AFib" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="165" width="150" height="65" as="geometry" />
        </mxCell>

        <mxCell id="g3" value="&lt;b&gt;G3: Data Quality&lt;/b&gt;&lt;br&gt;âœ“ Completeness&lt;br&gt;Field validation&lt;br&gt;Missing data check" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="240" width="150" height="65" as="geometry" />
        </mxCell>

        <mxCell id="g4" value="&lt;b&gt;G4: Syndrome Matching&lt;/b&gt;&lt;br&gt;ðŸ” Rule-based&lt;br&gt;TiTrATE framework&lt;br&gt;BPPV, vestibular neuritis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="315" width="150" height="65" as="geometry" />
        </mxCell>

        <mxCell id="g5" value="&lt;b&gt;G5: Uncertainty Quantification&lt;/b&gt;&lt;br&gt;ðŸ“Š Bayesian&lt;br&gt;MC Dropout&lt;br&gt;Epistemic uncertainty" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="390" width="150" height="65" as="geometry" />
        </mxCell>

        <mxCell id="g6" value="&lt;b&gt;G6: Temporal Analysis&lt;/b&gt;&lt;br&gt;â±ï¸ State machine&lt;br&gt;Symptom evolution&lt;br&gt;Time-to-presentation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;fontSize=10;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="220" y="465" width="150" height="65" as="geometry" />
        </mxCell>

        <!-- Arrows from Input to Gates -->
        <mxCell id="arrow_input_gates" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="input">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="220" y="310" as="targetPoint" />
            <Array as="points">
              <mxPoint x="180" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Conservative Merging Box -->
        <mxCell id="merging" value="&lt;b&gt;Conservative Merging&lt;/b&gt;&lt;br&gt;&lt;br&gt;MIN Operator&lt;br&gt;(Lattice Infimum âŠ“)&lt;br&gt;&lt;br&gt;Selects MOST CONSERVATIVE&lt;br&gt;assessment across all gates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=3;fontSize=11;fontStyle=1;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="550" y="180" width="200" height="140" as="geometry" />
        </mxCell>

        <!-- Risk Lattice Ordering (Below Merging) -->
        <mxCell id="lattice" value="&lt;b&gt;Risk Lattice Ordering:&lt;/b&gt;&lt;br&gt;&lt;br&gt;R* (Abstain) âŠ‘&lt;br&gt;R1 (Critical) âŠ‘&lt;br&gt;R2 (High-risk) âŠ‘&lt;br&gt;R3 (Moderate) âŠ‘&lt;br&gt;R4 (Low-risk) âŠ‘&lt;br&gt;R5 (Minimal)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e6;strokeColor=#CC6600;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="550" y="360" width="200" height="140" as="geometry" />
        </mxCell>

        <!-- Arrows from Gates to Merging (Colored) -->
        <mxCell id="arrow_g1_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#cc0000;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.15;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="g1" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_g2_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="g2" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_g3_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="g3" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_g4_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="g4" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_g5_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d79b00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="g5" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_g6_merge" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0e8088;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.85;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="g6" target="merging">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Output Boxes (Right Side) -->
        <mxCell id="output_tier" value="&lt;b&gt;Risk Tier Assignment&lt;/b&gt;&lt;br&gt;&lt;br&gt;R* = Defer to clinician&lt;br&gt;R1 = Critical (&amp;lt;5 min)&lt;br&gt;R2 = High-risk (&amp;lt;15 min)&lt;br&gt;R3 = Moderate (30-120 min)&lt;br&gt;R4 = Low-risk (1-4 hrs)&lt;br&gt;R5 = Safe discharge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="950" y="90" width="280" height="130" as="geometry" />
        </mxCell>

        <mxCell id="output_audit" value="&lt;b&gt;Audit Trail (Explainability)&lt;/b&gt;&lt;br&gt;&lt;br&gt;âœ“ Final tier: R_final&lt;br&gt;âœ“ Enforcing gate: G_enforce&lt;br&gt;âœ“ Gate outputs: {râ‚, râ‚‚, râ‚ƒ, râ‚„, râ‚…, râ‚†}&lt;br&gt;âœ“ Clinical rationale&lt;br&gt;âœ“ Triggered rules/features&lt;br&gt;âœ“ Confidence scores" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="950" y="250" width="280" height="130" as="geometry" />
        </mxCell>

        <mxCell id="metrics" value="&lt;b&gt;Safety Guarantees&lt;/b&gt;&lt;br&gt;&lt;br&gt;âœ“ Zero false negatives (R1-R2)&lt;br&gt;âœ“ 100% critical sensitivity&lt;br&gt;âœ“ Conservative over-triage&lt;br&gt;âœ“ Real-time (&amp;lt;2ms)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;fontSize=10;align=left;verticalAlign=top;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="950" y="410" width="280" height="90" as="geometry" />
        </mxCell>

        <!-- Arrows from Merging to Outputs -->
        <mxCell id="arrow_merge_tier" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#006600;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" edge="1" parent="1" source="merging" target="output_tier">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_merge_audit" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#006600;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="merging" target="output_audit">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_merge_metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#006600;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="merging" target="metrics">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="820" y="285" />
              <mxPoint x="820" y="455" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Key Innovation Box (Bottom Left) -->
        <mxCell id="innovation" value="&lt;b&gt;âš¡ KEY INNOVATION âš¡&lt;/b&gt;&lt;br&gt;&lt;br&gt;MIN selection (not averaging)&lt;br&gt;prevents safety signal dilution&lt;br&gt;&lt;br&gt;If ANY gate signals critical:&lt;br&gt;â†’ Final output IS critical" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#CC0000;strokeWidth=3;fontSize=11;fontStyle=1;align=center;fontFamily=Arial" vertex="1" parent="1">
          <mxGeometry x="20" y="400" width="130" height="130" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
